<!DOCTYPE html>
<html>

<head>

  <!-- Font Awesome Link -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" crossorigin="anonymous">
  <!-- Optional theme -->
  <link id="themeColors" rel="stylesheet" href="https://bootswatch.com/superhero/bootstrap.min.css" crossorigin="anonymous">
  <!-- app specific css style sheet -->
  <link rel="stylesheet" href="style.css">

</head>

<style>

  label{
    text-align: left;
  }

</style>

<body onload="loadTheme();">

  <div id="content">

    <div class="btn-group btn-group-justified">
      <a href="#" class="btn btn-default" id="home"><i class="fa fa-home" aria-hidden="true"></i>  Home</a>
      <a href="#" class="btn btn-default" id="newEntry"><i class="fa fa-keyboard-o" aria-hidden="true"></i>  New Entry</a>
      <a href="#" class="btn btn-default" id="database"><i class="fa fa-database" aria-hidden="true"></i>  Database</a>
      <a href="#" class="btn btn-default" id="settings"><i class="fa fa-cogs" aria-hidden="true"></i>  Settings</a>
    </div>

  <div class="form-group">
    <div class="input-group">
      <span class="input-group-addon"><i class="fa fa-search" aria-hidden="true"></i></span>
      <input type="text" class="form-control" id="searchBar">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button" id="searchButton">Search</button>
        </span>
      </div>
    </div>

    <h3>Profile</h3><br>


        <div id="profileContainer">

        </div>



      <div class="btn-group btn-group-justified">
        <a href="#" class="btn btn-default" id="edit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>  Edit</a>
        <a href="#" class="btn btn-default" id="share"><i class="fa fa-share-square-o" aria-hidden="true"></i>  Share</a>
        <a href="#" class="btn btn-default" id="delete"><i class="fa fa-trash-o" aria-hidden="true"></i>  Delete</a>
    </div>

  </div>

  <div class="modal" id="success">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">WARNING!</h4>
        </div>
        <div class="modal-body">
          <p>You are about to delete this database entry.<br>Are you sure you want to do this?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="yes">YES</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" id="no">NO</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="confirmAction">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Confirm Action</h4>
        </div>
        <div class="modal-body">
          <p>You have chosen to delete this database entry.<br>Is this correct?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="yes1">YES</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" id="no">NO</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="done">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Success!</h4>
        </div>
        <div class="modal-body">
          <p>Your entry has ben successfuly deleted.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="ok">OK</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="fail">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Error!</h4>
        </div>
        <div class="modal-body">
          <p>Unfortunately there was an error deleting your entry.<br> Please try again.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="ok1">OK</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="shareEntry">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Send entry information</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
              <input type="text" class="form-control" id="inputEmail" placeholder="E-mail">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="sendPDF">Send PDF</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" id="cancelEmail">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="entrySent">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Success!</h4>
        </div>
        <div class="modal-body">
          <p>Your entry has been sent.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" id="ok1">OK</button>
        </div>
      </div>
    </div>
  </div>

<!-- j.querry CDN -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js" crossorigin="anonymous"></script>
<!-- Firebase script -->
<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>
<!-- app specific js file -->
<script src="script.js" type="text/javascript"></script>

<script type="text/javascript">

$(window).load(function() {
  var suspectid = window.location.search.substring(4);
  $("#edit").attr("href", 'editEntryInfo.html?id='+suspectid);
  var suspect= app.database().ref('entries/' + suspectid);
  suspect.on('value', function(snapshot){
    var data = snapshot.val();
    var profile =`
    <div class="panel panel-primary">
          <div class="panel-heading">
            <h5 class="panel-title">Profile Picture</h5>
          </div>
          <div class="panel-body">
            <img id="profileImage">
          </div>
        </div>
    <table class="table table-striped table-hover" id="profileInfo">
          <tbody>
            <tr>
              <td>Gender</td>
              <td id="gender">${data.gender}</td>
            </tr>
            <tr>
              <td>Last Name</td>
              <td id="lastName">${data.last_name}</td>
            </tr>
            <tr>
              <td>First Name</td>
              <td id="firstName">${data.first_name}</td>
            </tr>
            <tr>
              <td>Alias</td>
              <td id="alias">${data.alias}</td>
            </tr>
            <tr>
              <td>Age/Date/Place of Birth</td>
              <td id="age">${data.age}</td>
            </tr>
            <tr>
              <td>Ethnicity</td>
              <td id="ethnicity">${data.ethnicity}</td>
            </tr>
            <tr>
              <td>Race</td>
              <td id="race">${data.race}</td>
            </tr>
            <tr>
              <td>Address</td>
              <td id="address">${data.address}</td>
            </tr>
            <tr>
              <td>Phone Number</td>
              <td id="phone">${data.phone}</td>
            </tr>
            <tr>
              <td>Social Security or DL Number</td>
              <td id="ssn">${data.SSN}</td>
            </tr>
            <tr>
              <td>Height/Weight</td>
              <td id="htwt">${data.ht_wt}</td>
            </tr>
            <tr>
              <td>Eye/Hair Color</td>
              <td id="eyehair">${data.eye_hair_color}</td>
            </tr>
            <tr>
              <td>Last Seen Wearing</td>
              <td id="outfit">${data.last_seen_wearing}</td>
            </tr>
            <tr>
              <td>Afiliations</td>
              <td id="affiliations">${data.affiliations}</td>
            </tr>
            <tr>
              <td>Location Stopped</td>
              <td id="location">${data.location}</td>
            </tr>
            <tr>
              <td>Vehicle Year/Make/Model/Color/Lic PLate Num</td>
              <td id="vehicle">${data.vehicle}</td>
            </tr>
          </tbody>
          </table>
          <div class="panel panel-default">
          <div class="panel-heading">History(past records)</div>
            <div class="panel-body">
            ${data.history}
          </div>
          </div>
          <div class="panel panel-default">
          <div class="panel-heading">Comments</div>
            <div class="panel-body">
            ${data.comments}
          </div>
          </div>`;
          $("#profileContainer").append(profile);
  })

});

$('#delete').click(function(){
  $('#success').modal('show');
});

$('#yes').click(function(){
  $('#confirmAction').modal('show');
})

$('#yes1').click(function(){
  var suspectid = window.location.search.substring(4);
  var suspect= app.database().ref('entries/' + suspectid);
  suspect.remove(function(){
    $('#done').modal('show');
}).catch(function(error) {
  $('#fail').modal('show');
  })
})


$('#sendPDF').click(function(){
  $('#entrySent').modal('show');
})

$('#no').click(function(){
  window.location.href='profile.html';
})

$('#ok').click(function(){
  window.location.href='database.html';
})

$('#ok1').click(function(){
  window.location.href='profile.html';
})

$('#share').click(function(){
  $('#shareEntry').modal('show');
});
/*
$('#edit').click(function(e){
  e.preventDEfault();
   window.location.href='editEntryInfo.html';
})*/

$('#database').click(function(){
   window.location.href='database.html';
})

$('#profile').click(function(){
  var suspectid = window.location.search.substring(4);
   window.location.href='profile.html?id='+ suspectid;
})

$('#settings').click(function(){
   window.location.href='settings.html';
})

$('#newEntry').click(function(){
   window.location.href='newEntry.html';
})

$('#home').click(function(){
   window.location.href='home.html';
})

</script>

</body>

</html>
